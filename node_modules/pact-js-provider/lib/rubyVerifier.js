'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.rakeVerify = rakeVerify;

var _child_process = require('child_process');

var _child_process2 = _interopRequireDefault(_child_process);

var _childProcessPromise = require('child-process-promise');

var _es6Promise = require('es6-promise');

var _logger = require('./logger');

var _logger2 = _interopRequireDefault(_logger);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function rakeVerify(consumerName, stateName, options) {
    var pactUrl = options.pactUrl;
    var providerUrl = options.baseUrl;

    var BUNDLE_EXEC_RAKE = 'BUNDLE_GEMFILE=./node_modules/pact-js-provider/Gemfile bundle exec rake --rakefile ./node_modules/pact-js-provider/Rakefile PactVerification:pact_verify[' + pactUrl + ',' + providerUrl + ',\'' + consumerName + '\',\'' + stateName + '\']';
    var cmd = BUNDLE_EXEC_RAKE;
    _logger2.default.debug('cmd', cmd);
    return _child_process2.default.execSync(cmd, { stdio: [0, 1, 2] });
}